# Cursor AI Rules for Modern Teaching

This project uses modular rules for better organization and maintainability.

## üìö Read All Rule Files

**‚≠ê‚≠ê START HERE:**
1. `docs/CURRENT-TASKS.md` - **WHAT TO DO NOW** (atomic action items)

**Primary Context:**
2. `.cursor/rules/core.md` - Project status, milestones, current priorities
3. `.cursor/rules/workflow.md` - Dev environment, testing strategy, common issues

**Technical Details:**
4. `docs/current/ARCHITECTURE.md` - Data flow, caching, auth, API endpoints
5. `docs/current/USER-JOURNEYS.md` - All implemented features and user flows

---

## üö® Critical Rules

### DO NOT Refactor Code

**Testing coverage must be complete before any code refactoring.**

Currently allowed:
- ‚úÖ Documentation updates
- ‚úÖ Test creation
- ‚úÖ Infrastructure setup (Chrome, testing tools)

Not allowed without approval:
- ‚ùå Code refactoring
- ‚ùå Architectural changes
- ‚ùå Feature additions

---

## üß™ Testing Strategy

**Automated Browser Testing (‚úÖ PROVEN):**

1. **Puppeteer with Auth Injection** (Primary)
   - Fully automated authenticated E2E testing
   - No manual login required
   - Full navigation, interaction, data extraction
   - Command: `node scripts/inject-auth-state.js`
   - Guide: `docs/guides/BROWSER-AUTOMATION.md`

2. **Jest** (Backend/Unit Only)
   - Data transformations
   - API route logic
   - Firebase integration
   - Command: `npm run test:emu`

3. **Cursor Playwright MCP** (Public Pages Only)
   - Quick unauthenticated page testing
   - Cannot authenticate (hCaptcha blocks)

---

## üéØ Current Priority

**Check:** `docs/CURRENT-TASKS.md` for today's priorities

**Testing-First Development:**
1. Fix any regressions (test first!)
2. Add test coverage for existing features
3. ONLY THEN consider new features or refactoring

**DO NOT proceed to code refactoring without explicit approval.**

---

## üìÇ Quick Navigation

- **TODOs:** `docs/CURRENT-TASKS.md` ‚≠ê‚≠ê **START HERE**
- **Status:** `.cursor/rules/core.md`
- **Workflow:** `.cursor/rules/workflow.md`
- **Testing:** `docs/guides/BROWSER-AUTOMATION.md` üß™ **Automated browser testing**
- **AI Protocol:** `scripts/AI-AGENT-PROTOCOL.md` ü§ñ **Auth expiration handling**
- **Architecture:** `docs/current/ARCHITECTURE.md`
- **Features:** `docs/current/USER-JOURNEYS.md`

---

## ‚ö†Ô∏è Important for AI Agents

**Authentication expiration is NORMAL, not a bug!**

When you see "AUTHENTICATION EXPIRED" messages:
- ‚úÖ DO: Instruct user to re-authenticate following the script's instructions
- ‚ùå DON'T: Try to debug or "fix" the auth code

**See:** `scripts/AI-AGENT-PROTOCOL.md` for complete protocol.

---

**For detailed rules, read the files above. This file only provides navigation.**